<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Takeaway Menu</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom scrollbar hiding (Tailwind doesn't have direct utilities for this across all browsers) */
      .no-scrollbar::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Edge (Chromium-based), Opera */
      }
      .no-scrollbar {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }

      /* Styles for draggable tabs - direct Tailwind replacement is complex, keeping a small custom style */
      .tabs.active {
        cursor: grabbing;
      }

      /* Apply Inter font, as cdn.tailwindcss.com doesn't automatically load Google Fonts */
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-white p-4 h-full overflow-hidden">
    <nav class="fixed inset-x-0 top-0 z-50 bg-white border-b border-green-200">
      <div class="flex h-14 items-center justify-between px-4 sm:px-6">
        <div class="flex items-center space-x-3">
          <div class="h-9 w-9 rounded-full bg-white">
            <img src="/images/logo/logo.png" alt="" srcset="" />
          </div>
          <span class="text-2xl font-extrabold text-green-700">Hello!</span>
        </div>

        <div class="flex items-center space-x-6">
          <a
            href="./home.html"
            class="flex items-center text-green-700 hover:text-green-600 transition-colors duration-200 active"
          >
            <svg
              class="h-6 w-6 stroke-current"
              fill="none"
              stroke-width="2"
              viewBox="0 0 24 24"
            >
              <path
                d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5Z"
              />
            </svg>
            <span class="hidden sm:inline ml-2">Home</span>
          </a>

          <a
            href="./order_history.html"
            class="flex items-center hover:text-green-600 transition-colors duration-200"
          >
            <svg
              class="h-6 w-6 stroke-current"
              fill="none"
              stroke-width="2"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M4 4h16v16H4zm4 4h8m-8 4h8m-8 4h4"
              />
            </svg>
            <span class="hidden sm:inline ml-2">Orders</span>
          </a>

          <a
            href="#"
            class="flex items-center hover:text-green-600 transition-colors duration-200"
          >
            <svg
              class="h-6 w-6 stroke-current"
              fill="none"
              stroke-width="2"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6 6 0 0 0-5-5.917V4a1 1 0 1 0-2 0v1.083A6 6 0 0 0 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0a3 3 0 0 1-6 0"
              />
            </svg>
            <span class="hidden sm:inline ml-2">Alerts</span>
          </a>
        </div>
      </div>
    </nav>

    <div class="flex-1 overflow-hidden">
      <h1
        class="text-2xl font-bold px-4 sm:px-6 py-4 bg-white z-20 fixed top-14 w-full border-b border-gray-200"
      >
        Menu
      </h1>
      <div
        class="tabs flex gap-x-2 overflow-x-auto overflow-y-hidden py-2 px-4 sm:px-6 whitespace-nowrap max-w-full no-scrollbar user-select-none cursor-grab fixed top-[132px] w-full bg-white z-10"
      >
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Foods
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Cakes
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Drinks
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Eats
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Coffee
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Eats
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Coffee
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Eats
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Coffee
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Foods
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Cakes
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Drinks
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Eats
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Coffee
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('foods')"
        >
          Eats
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('cakes')"
        >
          Coffee
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
        <div
          class="tab flex-none px-4 py-2 rounded-full bg-gray-200 cursor-pointer whitespace-nowrap scroll-snap-align-start user-select-none transition-colors duration-200"
          onclick="filterMenu('drinks')"
        >
          Dinner
        </div>
      </div>
    </div>

    <div
      class="scroll-area mt-[180px] h-[calc(100vh-250px)] overflow-y-auto pb-20 no-scrollbar px-4 sm:px-6"
    >
      <div
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"
        id="menu"
      ></div>
    </div>

    <div
      class="footer fixed bottom-0 left-0 w-full flex justify-between items-center px-4 sm:px-6 py-4 bg-green-700 text-white text-base hidden"
      id="footer-bar"
      onclick="goToCart()"
    >
      <div class="flex items-center">
        <span
          class="bg-white text-green-700 rounded-full px-2 py-1 mr-2 font-bold"
          id="item-count"
          >0</span
        >
        View your cart
      </div>
      <div id="cart-total">0 MMK</div>
    </div>

    <script>
      const menuItems = [
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "cakes",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "drinks",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "cakes",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "drinks",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "cakes",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "drinks",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
        {
          name: "Sliced Bread",
          price: 3000,
          img: "/images/logo/logo.png",
          category: "foods",
        },
      ];

      let cartCount = 0;
      let cartTotal = 0;

      function renderMenu(filter = "foods") {
        const menu = document.getElementById("menu");
        menu.innerHTML = "";
        menuItems
          .filter((item) => item.category === filter)
          .forEach((item, index) => {
            const card = document.createElement("div");
            // Tailwind classes for the card
            card.className =
              "card rounded-xl shadow-md overflow-hidden text-center p-2 bg-white relative";
            card.innerHTML = `
          <img src="${item.img}" alt="${
              item.name
            }" class="w-full rounded-lg mb-2" />
          <div class="font-bold text-base my-1">${item.name}</div>
          <div class="text-gray-600 mb-2">${item.price.toLocaleString()} MMK</div>
          <div class="counter hidden flex items-center justify-between bg-gray-100 rounded-full py-1 px-3 w-28 mx-auto mb-2" id="counter-${index}">
            <button onclick="updateQuantity(${index}, -1, ${
              item.price
            })" class="text-lg text-green-700 cursor-pointer border-none bg-transparent">−</button>
            <span id="qty-${index}" class="font-bold text-green-700">1</span>
            <button onclick="updateQuantity(${index}, 1, ${
              item.price
            })" class="text-lg text-green-700 cursor-pointer border-none bg-transparent">+</button>
          </div>
          <button class="btn bg-green-700 text-white py-2 px-4 rounded-full border-none w-full cursor-pointer font-bold mt-2" onclick="addToCart(${
            item.price
          }, ${index})" id="btn-${index}">Add to Cart</button>
        `;
            menu.appendChild(card);
          });
      }

      function addToCart(price, index) {
        const qty = parseInt(
          document.getElementById(`qty-${index}`).textContent
        );
        cartCount += qty;
        cartTotal += price * qty;
        document.getElementById("item-count").textContent = cartCount;
        document.getElementById(
          "cart-total"
        ).textContent = `${cartTotal.toLocaleString()} MMK`;
        document.getElementById(`counter-${index}`).classList.remove("hidden");
        document.getElementById(`counter-${index}`).classList.add("flex");
        document.getElementById(`btn-${index}`).classList.add("hidden");
        document.getElementById("footer-bar").classList.remove("hidden");
        document.getElementById("footer-bar").classList.add("flex");
      }

      function updateQuantity(index, change, price) {
        const qtyEl = document.getElementById(`qty-${index}`);
        let qty = parseInt(qtyEl.textContent);
        qty += change;
        if (qty <= 0) {
          document.getElementById(`counter-${index}`).classList.add("hidden");
          document.getElementById(`counter-${index}`).classList.remove("flex");
          document.getElementById(`btn-${index}`).classList.remove("hidden");
          document.getElementById(`btn-${index}`).classList.add("block");
          cartCount--; // Decrement cartCount as item is removed
          cartTotal -= price; // Subtract price as item is removed
        } else {
          cartCount += change;
          cartTotal += change * price;
          qtyEl.textContent = qty;
        }
        document.getElementById("item-count").textContent = cartCount;
        document.getElementById(
          "cart-total"
        ).textContent = `${cartTotal.toLocaleString()} MMK`;
        if (cartCount === 0) {
          document.getElementById("footer-bar").classList.add("hidden");
          document.getElementById("footer-bar").classList.remove("flex");
        }
      }

      function filterMenu(category) {
        document.querySelectorAll(".tab").forEach((tab) => {
          tab.classList.remove("bg-green-200", "text-green-700", "font-bold");
          tab.classList.add("bg-gray-200");
        });
        const activeTab = document.querySelector(
          `.tab[onclick*="${category}"]`
        );
        if (activeTab) {
          activeTab.classList.add(
            "bg-green-200",
            "text-green-700",
            "font-bold"
          );
          activeTab.classList.remove("bg-gray-200");
        }
        renderMenu(category);
      }

      renderMenu(); // Initial render

      // Draggable tabs script
      const tabs = document.querySelector(".tabs");
      let isDown = false;
      let startX;
      let scrollLeft;

      tabs.addEventListener("mousedown", (e) => {
        isDown = true;
        tabs.classList.add("active");
        startX = e.pageX - tabs.offsetLeft;
        scrollLeft = tabs.scrollLeft;
      });

      tabs.addEventListener("mouseleave", () => {
        isDown = false;
        tabs.classList.remove("active");
      });

      tabs.addEventListener("mouseup", () => {
        isDown = false;
        tabs.classList.remove("active");
      });

      tabs.addEventListener("mousemove", (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - tabs.offsetLeft;
        const walk = (x - startX) * 1.5; // scroll speed
        tabs.scrollLeft = scrollLeft - walk;
      });

      function goToCart() {
        window.location.href = "cart.html"; // Change if path differs
      }
    </script>
  </body>
</html>
